<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>directive</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
  <div id="app">
    <input type="text" v-focus>
    <div id="hook-arguments-example" v-if="showDemo" v-demo:foo.a.b="message"></div>
    <button @click="toggleDemo">toggleDemo</button>
    <button @click="changeMessage">changeMessage</button>

  </div>
</body>

<script>

  Vue.directive('focus', {
    inserted: function(el) {
      el.focus();
    }
  });

  // 钩子生命周期
  Vue.directive('demo', {
    // el 以外其他的都是 read only
    bind: function(el, binding, vnode) {
      console.log('bind');
      el.innerHTML =
      'name: '       + (binding.name) + '<br>' +
      'value: '      + (binding.value) + '<br>' +
      'expression: ' + (binding.expression) + '<br>' +
      'argument: '   + JSON.stringify(binding.arg) + '<br>' +
      'modifiers: '  + JSON.stringify(binding.modifiers) + '<br>' +
      'vnode keys: ' + Object.keys(vnode).join(', ')
    },
    inserted: function(el, bind, vnode) {
      console.log('inserted');
    },
    update: function(el, bind, vnode, oldVnode) {
      console.log('update');
    },
    componentUpdated: function(el, bind, vnode, oldVnode) {
      console.log('componentUpdated');
    },
    unbind: function(el, bind, vnode) {
      console.log('unbind');
    }
  });

  Vue.directive();

  new Vue({
    el: '#app',
    data: {
      message: 'hello',
      showDemo: true
    },
    methods: {
      toggleDemo: function() {
        this.showDemo = !this.showDemo;
      },
      changeMessage: function() {
        this.message += 'omg|';
      }
    }
  });
</script>
</html>