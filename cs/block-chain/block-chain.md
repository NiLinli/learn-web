# block chain

## 目的

### 传统交易

银行转账： A 用户 -> 银行(管理交易记录 + 数据, 依赖的独立第三方) -> B 用户
传统交易的问题：银行不是绝对可信的, 银行是别人的 (中心化)

### 干掉银行

在一个交易圈子里面的所有用户自行维护账本(干死万恶的银行家), 去中心化

要求：

1. 必须有足够的人不想依赖第三方
2. 足够的人： 3 个以上

## 分布式/中心化

1. 中心化计算机
    - 优点：成本低, 速度快
    - 缺点：如果中央计算机 (服务器) 出故障或被黑了, 就会连累与其连接的所有用户
2. 分布式计算机
    - 缺点：慢, 成本高
    - 优点：去中心化了之后, 只有当每个节点都出故障之时，去中心化计算机才会出故障，因此这台计算机能够一直工作下去

## 区块链

区块链：

- **分布式**的去中心化分类账(分类账是承载区块列表的主要记录载体)
- 用来存储交易信息等数据(区块能存储数据/信息)
- 这些数据为整个区块链网络中的节点所共享
    - 区块链里有很多机器（因此它不是中心化的）
    - 且所有机器都是点对点相互连接
    - 这些机器维护的是同一本分类账, 为整个区块链网络中的节点所共享
    - 区块链被称为分布式的去中心化分类账
    - 每个人都有整个分类账的副本, 一旦有什么东西添加进去, 副本马上就会更新

分布式(安全问题)： [加密](./block-chain/encrypt.md)

数据库, 特定数据的数据库

特点：

1. 一旦数据存储于数据库，永远都无法被修改或删除。区块链上的每个记录会被永久保存下来
2. 没有单独的个人或组织能维护该数据库。必须要上千个人才行，每个人都有数据库的副本

### 区块链示例

用户：

- 空的文件夹(链)
    1. 持续向当前文件夹添加纸张 (区块)
    2. 纸张的集合将形成追踪交易的账簿
- 发生交易
    1. 每个人都准备着记录下该系统内部发生的任何交易
    2. #2 转账到 #9 10 美元
    3. 其他用户都会拿自己的小本子记下来(交易满足的情况下)
    4. 这笔交易完成
- 一张纸记录完成(10笔交易为满)后, 拿出一张新的纸张记录
- 存放纸张
    1. 存入文件夹之前, 需要使用该网络中每个人都同意的 **唯一一把密钥** 去加密
    2. 加密备份成功后, 没有人能作出任何的更改
    3. 信任这个封条 -> 信任这一页纸 -> **加密**是关键

#### 信任

银行(第三方中介)：无论它们在账簿上已经写了什么，都永远不可变更
区块链系统：封条将提供信任替代

#### 封条

哈希方程

1. 相同的 input , 相同的 output (校验比较简单)
2. 过程不可逆, 逆向极其复杂
3. 加密算法很难反接获得

数字 Input

1. 内容
2. 密封数字/工作量证明
3. 前面一个区块的输出值

Output 输出(已知)

内容  + 密封数字(穷举) --哈希方程--> 输出内容

#### 密封数字

1. 一旦每个人都用尽一页纸的空间、无法记录进一步的交易
2. 他们就开始卖力地计算该页纸的密封数字，使得它可以被藏入文件夹中
3. 在网络中，每个人都进行这个计算，而最早算出密封数字的那个人会向其他所有人宣布这个数字
4. 听到密封数字之后，每个人都立即验证它是否能产生要求的输出值
5. 如果是的，每个人都为他们的纸张标上这个数字，然后把纸张放入文件夹中

bitcoin: 第一个计算密封数字的人会得到免费的金钱(努力工作的回报)

纸： 区块
文件夹： 区块链条


防止对密封数字的修改：

1 -> 2 -> 3 -> 4 -> 5

回到 2 , 改动了 2 里面的记录(赚钱) -> 密封数字让任何人察觉交易记录中的矛盾 -> 算出一个新的密封数字(替换原有的密封数字)

1. 最长的链就是诚实可信任的链
2. 51% 攻击
    - 一群人中的大部分都总是诚实的
    - 如果区块链可能会陷落，这就是其脆弱性的唯一原因
    - 知道了这一点，它也就不太可能发生了

## 区块链应用

区块链可用于存储任何类型的数据(加密资产), 存储在区块链上的数据类型会赋予区块链价值,

1. 比特币 BitCoin 2019 年提出
    - 数据类型： **金融交易记录**
    - 价值： 类似于一种像美元或英镑那样的货币, 比特币的用处与美元一样
2. 以太坊 ETH  巨大的分布式计算机
3. EOS
