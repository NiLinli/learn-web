# 运输层/传输层

Transport => 数据单元 segment

TCP/UDP

运输层协议为运行在不同主机上的**应用进程**提供 逻辑通信。
应用进程通过运输层提供的通信功能彼此发送报文， 而无需考虑其他底层细节。

运输层处理网络层移交过来的报文段, 供对应的**应用进程**使用。

## 特点

寻址 IP + PORT
全双工
字节流
无消息定界
有连接定向

## 概念

连接: 发送方和接收方的运输层实体是否握手 (逻辑连接，共同状态保存在两个通信端的 TCP 程序中)
握手: 相互发送默写预备报文段，建立确保数据传输的参数

## UDP

用户数据报协议
不可靠， 无连接

- 数据交付
- 差错检查

最低限度的运输层服务
**可以通过应用层协议去扩展**

## TCP

传输控制协议，全双工服务

可靠，面向连接

- 数据交付
- 差错检查
- 重传/回退N步
- 流量控制
- 控制拥塞
- ...

### 三次握手

传输数据之前通过三次握手建立连接

1. 客户端发送一个特殊的 TCP 报文段，     Trying 14.215.177.39...
2. 服务器用另外一个 特殊的 TCP 报文段响应  TCP_NODELAY set
3. 客户端再用第三个特殊报文段响应(完成连接)  Connected to www.baidu.com (14.215.177.39) port 443 (#0)

共发送了 3 个 TCP 报文段， 所以称为 3 次握手

### 四次挥手


## socket

- 传递数据流
- **运输层**和**进程**之间的门，介于两者之间
- 应用程序开发人员在生成 socket 时候, 必须选择 TCP 还是 UDP
