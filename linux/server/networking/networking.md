# 计算机网络

## 组成部分

1. 主机 host/端系统 end system (运行各种网络应用)
2. 链路 + 分组交换机 连接
3. 端通过 ISP 接入 Internet

## 数据传输方式

交换

- 动态链接 交换设备将数据从一个端口input 另外一个端口 output
- 动态分配传输资源

### 电路交换

程控交换机

1. 建立链接(建立后电路专用, 不能被他人占用)
2. 通信
3. 释放链接后, 电路可被其他人使用

复用：多路复用
缺点: 链路组网麻烦， 建立电路后被独占  

### 报文交换/分组交换

分组交换机

计算机都和交换设备组(交换网络)链接, 交换设备进行存储转发(交换方式)

报文交换: 完整的数据进行一些列的转发
分组交换：拆分报文 -> 拆分后的小报文 + 头部信息 存储转发 -> 收到所有小报文后根据头部信息重组整个报文

复用方式: 统计多路复用(按需共享电路)

### 分组

packet: 发送数据端将数据分段, 给每段加上首部字节, 形成的信息包

### 路由器

router: 常见分组交换机
link-layer: switch 链路层交换机
route/path: 一个packet 经历过的 链路 + 分组交换机路径

### 指标

#### 时延

总时延 =

1. 节点处理时延: 检查分组首部 + 决定将该分组导向何处
2. 排队时延: 等待传输的时间 ms/μs 级别, 取决于这个交换机的分组的拥挤程度·
3. 传输时延: 路由器将分组推到链路上花费的时间 L/R, ms/μs 级别
    - L 分组的长度
    - R 速率
4. 传播时延: 一个bit 从一台路由器到另外一台路由器的时间, 速度为光速, 与距离相关

不同情况, 各时延占的权重不同

传输时延

- 报文交换： 为路由器 * 推到链路的时间 路由器组串行
- 分组交换： 约等于 1 * 推到链路的时间 路由器组并行

#### 丢包

排队的队列是有限的, 流量强队接近于 1 时候, 路由器没有地方存储这个 packet , 就会直接丢弃

#### 吞吐量

传输速率

分组会经过多个链路, 每个链路传输速率不同,  
文件的传输吞吐量取 min{R1, R2, R....,, RN}  
大于这个值, 会导致分组积压在某个链路

干扰流量

## protocols 协议

任何通信或者信息交换都需要规则/协议 RFC request for comments

定义： 网络中主机数据交换建立的规则、标准或者约定
规定： 交换信息的格式、意义、顺序、以及收发信息采取的 action

协议是计算机的重要组成部分
允许跨越上述部分通信

1. 硬件体系结构
2. 操作系统
3. 编程语言

### 协议三要素

- 语法 Syntax
  - 数据/控制信息结构或者格式
  - 信号电平
- 语义 Semantics
  - 发出何种控制信息
  - 完成何种动作 做出何种相应
- 时序 Timing
  - 事件顺序
  - 速度匹配

## 网络编程

协议编程

### 网络模型

- OSI 开放系统互联七层模型(互联网出现之前)
- TCP/IP 互联网四层模型 去掉了物理层, 会话层, 展示层

**上一层协议是对下一层协议的抽象**

链路层 -> 网络层 IP -> 传输层 TCP/UDP -> 应用层(HTTP, SMTP...)

## 应用模型

- client/server
- peer to peer
