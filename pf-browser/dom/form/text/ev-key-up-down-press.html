<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>key event</title>
</head>

<body>
    <!-- <form action="" id="myForm"> -->
        <h3>keydown keypress keyup 区别</h3>
        <input type="text" name="txt" id="txt">
        <h3>键盘过滤事件</h3>
    <!-- </form> -->
    <form action="" id="myForm2">
        <h3>tabForward</h3>
        <input type="text" name="tab1" maxlength="1">
        <input type="text" name="tab2" maxlength="1">
        <input type="text" name="tab3" maxlength="1">
        <input type="text" name="tab4" maxlength="1">
    </form>
</body>

<script>
    var myForm = document.getElementById('myForm'),
        // elements = myForm.elements,
        txt = document.getElementById('txt')


    // keypress deprecated 并且手机端不支持
    txt.addEventListener('keypress', function (event) {
        console.log('keypress value is ' + this.value);                   // 输入之前的变量
        console.log(event.keyCode);
        console.log(event.charCode);

        console.log(event.which);


        // ignoreInput(event);

    });


    txt.addEventListener('keydown', function (event) {
        console.log('keydown value is ' + this.value);                    // 输入之前的变量
        console.log(event.keyCode);
        console.log(event.which);
        if (event.keyCode === 48) {
            console.log('keydown 阻止了输入');
            event.preventDefault();
        }
    });

    txt.addEventListener('keyup', function (event) {
        console.log('keyup value is ' + this.value);                      // 输入好了的变量
        console.log(event.keyCode);
        console.log(event.which);
    });

    var myForm2 = document.getElementById('myForm2'),
        elements2 = myForm2.elements;

    for (var i = 0; i < elements2.length; i++) {
        elements2[i].addEventListener('keyup', function (e) {
            tabForward(e);
        });
    }

    // 自动切换焦点, 用户输入已经到达了maxLength,自动切换到下一个焦点, keyup 监控
    function tabForward(event) {
        var target = event.target;
        if (target.value.length === target.maxLength) {
            var form = target.form;

            for (var i = 0; i < form.elements.length; i++) {
                if (form.elements[i] === target) {
                    if (form.elements[i + 1]) {
                        form.elements[i + 1].focus();
                    }
                    break;
                }
            }
        }
    }



    // 过滤输入
    function ignoreInput(event) {
        // 理论上按下字符键（数字+字母），触发keypress事件
        // 有些浏览器方向键等也会触发...
        var charCode = event.charCode;
        console.log(charCode)
        if (!/\d/.test(String.fromCharCode(charCode)) && charCode > 9 && !event.ctrlKey) {
            event.preventDefault();         // 屏蔽按键事件的默认输入，即忽略输入
        }
    }




</script>

</html>